
<div class="card-header">
  <h3>Transactions of <%= @finance.name %> between</h3>
  <br>
  <%= form_for :cash_transaction do |f| %>
    <div class="m-top-15">
      <p> From:<%= f.date_field :start_date, value: @start_date %>
        To:
        <%= f.date_field :end_date, value: @end_date.to_date %></p>
    </div>
    <div>
      <%= f.submit "Search", class: 'btn btn-primary' %>
      <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse" aria-expanded="false" aria-controls="collapseExample">
        Show general amount
      </button>
    </div>
  <% end %>
</div>

  <div class="collapse" id="collapse">
    <div class="card card-body">
      Amount by category <%= @finance.name %>  is <%= @sum_amount %>
    </div>
  </div>

  <div>
    <p class="text-center"><h2>Transactions list</h2></p>
  </div>


<% @cash_transactions.each do |transaction| %>

  <div class="card">
    <div class="card-body">
    <h5 class="card-title"><%= transaction.persons_finance.person.first_name %></h5>
      <p class="card-text"><strong>Operation type:</strong> <%= transaction.persons_finance.finance.incomeOrExpence ? 'Income' : 'Expence' %></p>
        <p class="card-text"><strong>Category:</strong> <%= transaction.persons_finance.finance.name %></p>
        <p class="card-text"><strong>Amount:</strong> <%= transaction.amount %></p>

        <% if transaction.note.nil? %>
        <p class="card-subtitle mb-2 text-muted">Note isn't exist</p>

        <% else %>
        <div>
          <div class="content">
            <div>Note</div>
            <div>
              <p class="text-center"<%= transaction.note.note_text %></p>
              <%= link_to 'Edit', edit_note_path(transaction.note), class: 'btn btn-secondary' %>
              <%= link_to 'Delete', note_path(transaction.note), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %>
            </div>
          </div>
        </div>
        <% end %>
    <div>
      <div>
        <%= link_to 'Edit', edit_cash_transaction_path(transaction), class: 'btn btn-secondary' %>
        <%= link_to 'Delete', cash_transaction_path(transaction), method: :delete, class: 'btn btn-danger ', data: { confirm: 'Are you sure?' } %>
      </div>
    </div>
  </div>
  </div>
<% end %>
